<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body>
    <!-- Index View -->
    <div id="indexView">
    <h1 id="stimGroupSelect">Select Stimulus Group</h1>
    
    <div id="stimGroupWrapper">
        <h1 id="stimText">Session 1: </h1>
        <button class='stimGroup'>Stimulus Identity</button>
        <button class='stimGroup'>Stimulus Type</button>
        <button class='stimGroup'>Target Stimulus</button>    
    </div>
    </div>

        <input type="file" id="LFPfile" accept=".npy" style="display: none;" />
        <input type="file" id="waveletFile" accept=".npy" style="display: none;" />

    </div>

       <!-- Heatmap View (hidden by default) -->
    <div id="heatmapView" style="display: none;">
        
        <span onclick="showIndexView()" id="homeButton">Return Home</span>

        <div id = containerWrapper>

        <div id="channelButtonContainer">
            <button id="prevChan" class="button">Previous Channel</button>
            <h1 id="channelDisplay" style="text-align:center;"></h1>
            <button id="nextChan" class="button">Next Channel</button>
        </div>
        
        
        <div id = "containers">
            
            <span id="yAxisLabel">Frequency  (Hz)</span>

            <div id="heatmapWrapper">
                <div class="container" id="container1"></div>
                <div class="container" id="container2"></div>
                <div class="container" id="container3"></div>
                
            </div>
            <span id="colorbarLabel"></span>

        </div>

        <div class="container" id="container4"></div>

        <div id="controls">

            <div id = 'trialScroll'>
                
                <button id = "excludeTrialButton">Exclude Trial from Channels</button>
                <label for="trialSlider">Trial: </label>
                <input type="range" id="trialSlider">
                <span id="trialNumber"></span>
                <button id="meanTrialsButton">Average Trials</button>
                <button class="ANOVAbutton">ANOVA</button>
                
            </div>
            
            <div id = 'ANOVAscroll' style="display: none;">
                
                <div id = 'sliderContainer'>
                    <label for="channelSlider">Channel: </label>
                    <input type="range" id="channelSlider">
                </div>

                <div id= 'textContainer'>
                    <span id="channelNumber"></span>
                </div>

            </div>

            <div id="channelScroll" style="display: none;">
                
                <button id = "excludeChannelButton">Exclude Channel from Trials</button>
                <label for="channelSlider">Channel: </label>
                <input type="range" id="channelSlider">
                <span id="channelNumber"></span>
                <button id="meanChannelsButton">Average Channels</button>

            </div>

            <div id="pValDiv" style="display: none;">
                <button class="ANOVAbutton">ANOVA</button>
                <span id="pValId"> pValue = </span>
                <input type="text" id= "pVal" value= "0.10" style="width: 75px; height: 24px;">
                <button id = 'allANOVA' style = 'margin-left : 100px'>All Channels</button>
                <span id="warning">Warning! Loading Time 15 minutes</span>

            </div>
            
        </div>
           
        </div>


        <div id="groupButtonContainer">

            <button class="groupButton"></button>
            <div  class="excluded-trials-container"></div>

            <button class="groupButton"></button>
            <div class="excluded-trials-container"></div>

            <button class="groupButton"></button>
            <div class="excluded-trials-container"></div>

        </div>

        <h1 id= "loadingText" >Loading...</h1>
        
        
    </div>

    <h1 id="uploadFile">Or Upload File</h1>

    <div id="uploadDiv">
        
        <button id="uploadWavelet" class = 'uploadButton' disabled>
            Upload Wavelet
            <span class="tooltipText">Frequency x Time x Trials for each (.npy) file/channel</span>
        </button>

        
        <button id="uploadLFP" class = 'uploadButton' disabled>
            Upload LFP
            <span class="tooltipText">Time x Trials for each (.npy) file/channel </span>
        </button>
      
    </div>   

    <form id="dataForm">

        <input type="text" id="freqLow" class= 'inputValues' placeholder="Set Min Frequency (Hz)">
        <input type="text" id="freqHigh" class= 'inputValues' placeholder="Set Max Frequency  (&lt;200Hz)">
        
        <input type="text" id="timeStart" class= 'inputValues timeInput' placeholder="Set Time Start (sec)">
        <input type="text" id="timeStop" class= 'inputValues timeInput' placeholder="Set Time End (sec)">
    </form>
  

    <script src= "https://d3js.org/d3.v5.min.js"></script>

    <script src= "buttons.js"></script>
    <script src= "page.js"></script>
    <script src= "heatmap.js"></script>
    <script src= "colorbar.js"></script>
    <script src= "LFPchart.js"></script>


    <script>

        function showIndexView() {
            document.title = 'Home Page';
            const indexView = document.getElementById('indexView')
            indexView.style.display = 'flex'
            document.getElementById('heatmapView').style.display = 'none';
        }
    </script>
    
</body>